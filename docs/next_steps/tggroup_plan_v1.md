# Telegram Group Member Sync Strategy

## –û–±–∑–æ—Ä

–ö–æ–≥–¥–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –±–æ—Ç–∞ Ayda Run –≤ Telegram –≥—Ä—É–ø–ø—É, –º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ —Å–æ–∑–¥–∞–µ–º –∏–º –∞–∫–∫–∞—É–Ω—Ç—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

---

## 1Ô∏è‚É£ –ü–∞—Ä—Å–∏–Ω–≥ –∞–¥–º–∏–Ω–æ–≤ (immediate)

**–ö–æ–≥–¥–∞:** –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

**–ú–µ—Ç–æ–¥:** `getChatAdministrators(chat_id)`

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤ –≥—Ä—É–ø–ø—ã
- –°–æ–∑–¥–∞–µ–º –∏–º –∞–∫–∫–∞—É–Ω—Ç—ã –≤ Ayda Run
- –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–ª—É–± —Å —Ä–æ–ª—å—é `organizer`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É

```python
@bot.on("my_chat_member")
async def bot_added_to_group(update):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –±–æ—Ç —Å—Ç–∞–ª –∞–¥–º–∏–Ω–æ–º
    if update.my_chat_member.new_chat_member.status == "administrator":
        chat_id = update.my_chat_member.chat.id
        
        # 1. –°–æ–∑–¥–∞–µ–º –∫–ª—É–±
        club = await create_club(chat_id, chat_title)
        
        # 2. –ü–∞—Ä—Å–∏–º –∞–¥–º–∏–Ω–æ–≤
        admins = await bot.get_chat_administrators(chat_id)
        for admin in admins:
            if not admin.user.is_bot:
                await create_user_and_add_to_club(
                    user=admin.user,
                    club_id=club["_id"],
                    role="organizer"
                )
        
        # 3. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –≥—Ä—É–ø–ø—É
        await bot.send_message(chat_id, welcome_message)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ä–∞–∑—É
- ‚úÖ –ú–æ–≥—É—Ç –Ω–∞—á–∞—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## 2Ô∏è‚É£ –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç (manual registration)

**–ö–æ–≥–¥–∞:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞

**–ú–µ—Ç–æ–¥:** –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ inline –∫–Ω–æ–ø–∫—É

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –≥—Ä—É–ø–ø—É —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ deep link
- –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤ –≥—Ä—É–ø–ø–µ

```python
# –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
await bot.send_message(
    chat_id,
    text=(
        "üëã –ö–ª—É–± —Å–æ–∑–¥–∞–Ω!\n\n"
        "‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã\n"
        "‚úÖ –û—Å—Ç–∞–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è üëá"
    ),
    reply_markup={
        "inline_keyboard": [[
            {"text": "üèÉ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è", 
             "url": f"https://t.me/aydarun_bot?start=join_{chat_id}"}
        ]]
    }
)

# Handler –¥–ª—è deep link
@bot.on("message", filters.command("start"))
async def handle_registration(message):
    # /start join_-100123456
    args = message.text.split()
    if len(args) > 1 and args[1].startswith("join_"):
        chat_id = args[1].replace("join_", "")
        user = message.from_user
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≥—Ä—É–ø–ø–µ
        try:
            member = await bot.get_chat_member(chat_id, user.id)
            if member.status in ["member", "administrator", "creator"]:
                await create_user_and_add_to_club(user, chat_id, role="member")
                await message.reply("‚úÖ –¢—ã –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–ª—É–±!")
        except:
            await message.reply("‚ùå –¢—ã –Ω–µ —Å–æ—Å—Ç–æ–∏—à—å –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ –≥—Ä—É–ø–ø–µ

---

## 3Ô∏è‚É£ –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ chat_member —Å–æ–±—ã—Ç–∏—è (automatic tracking)

**–ö–æ–≥–¥–∞:** –£—á–∞—Å—Ç–Ω–∏–∫ –≤—Ö–æ–¥–∏—Ç/–≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –≥—Ä—É–ø–ø—ã

**–ú–µ—Ç–æ–¥:** Webhook —Å–æ–±—ã—Ç–∏—è `chat_member`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–æ–º
- –í webhook –≤–∫–ª—é—á–∏—Ç—å: `allowed_updates: ["chat_member"]`

**–î–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ–º –∞–∫–∫–∞—É–Ω—Ç
- –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–ª—É–± —Å —Ä–æ–ª—å—é `member`
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –ª–∏—á–∫—É

**–î–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —É—à–µ–¥—à–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
- –ü–æ–º–µ—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∫ `left` –∏–ª–∏ `kicked`
- –£–±–∏—Ä–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–ª—É–±—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

```python
@bot.on("chat_member")
async def track_member_changes(update):
    chat_id = update.chat_member.chat.id
    user = update.chat_member.new_chat_member.user
    new_status = update.chat_member.new_chat_member.status
    
    # –ù–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫
    if new_status in ["member", "administrator", "creator"]:
        await create_user_and_add_to_club(
            user=user,
            chat_id=chat_id,
            role="member",
            source="chat_member_event"
        )
        
        # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –ª–∏—á–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        try:
            await bot.send_message(
                user.id,
                f"üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –¢—ã –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–ª—É–±.\n"
                f"–û—Ç–∫—Ä–æ–π Ayda Run —á—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ üëá"
            )
        except:
            pass  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
    
    # –£—á–∞—Å—Ç–Ω–∏–∫ –≤—ã—à–µ–ª
    elif new_status in ["left", "kicked", "banned"]:
        await mark_member_inactive(
            chat_id=chat_id,
            user_id=user.id,
            status=new_status
        )
        
        # –£–±–∏—Ä–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–ª—É–±—É
        await revoke_club_access(user.id, chat_id)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —É—à–µ–¥—à–∏—Ö
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## 4Ô∏è‚É£ –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è + –∫–µ—à (passive tracking)

**–ö–æ–≥–¥–∞:** –£—á–∞—Å—Ç–Ω–∏–∫ –ø–∏—à–µ—Ç –≤ –≥—Ä—É–ø–ø—É

**–ú–µ—Ç–æ–¥:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π + in-memory –∫–µ—à

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Privacy Mode –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω –≤ @BotFather
- –í webhook –≤–∫–ª—é—á–∏—Ç—å: `allowed_updates: ["message"]`

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à (–±—ã—Å—Ç—Ä–æ, <1ms)
- –ï—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –Ω–µ—Ç –≤ –∫–µ—à–µ ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º –ë–î
- –ï—Å–ª–∏ –Ω–µ—Ç –≤ –ë–î ‚Üí —Å–æ–∑–¥–∞–µ–º –∞–∫–∫–∞—É–Ω—Ç
- –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–µ—à –Ω–∞ 1 —á–∞—Å

```python
from cachetools import TTLCache

# –ö–µ—à: {chat_id:user_id} -> True
members_cache = TTLCache(maxsize=50000, ttl=3600)  # 1 —á–∞—Å
clubs_cache = TTLCache(maxsize=1000, ttl=3600)

@bot.on("message")
async def auto_register_from_messages(update):
    message = update.message
    
    # –§–∏–ª—å—Ç—Ä—ã
    if message.from_user.is_bot:
        return
    if message.chat.type not in ["group", "supergroup"]:
        return
    
    chat_id = message.chat.id
    user_id = message.from_user.id
    cache_key = f"{chat_id}:{user_id}"
    
    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ (–ë–´–°–¢–†–û)
    if cache_key in members_cache:
        return  # –£–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω
    
    # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–ª—É–± —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Å –∫–µ—à–µ–º)
    club = clubs_cache.get(chat_id)
    if not club:
        club = await db.clubs.find_one({"telegram_group_id": chat_id})
        if not club:
            return  # –ì—Ä—É–ø–ø–∞ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞
        clubs_cache[chat_id] = club
    
    # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î (–ú–ï–î–õ–ï–ù–ù–û)
    member_exists = await db.clubs.find_one({
        "telegram_group_id": chat_id,
        "members.telegram_id": user_id
    })
    
    if member_exists:
        # –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–µ—à
        members_cache[cache_key] = True
        return
    
    # 4. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–≤ —Ñ–æ–Ω–µ)
    asyncio.create_task(
        create_user_and_add_to_club(
            user=message.from_user,
            chat_id=chat_id,
            role="member",
            source="message_activity"
        )
    )
    
    # 5. –°—Ä–∞–∑—É –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–µ—à
    members_cache[cache_key] = True
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù—É–ª–µ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–∏–∑ –∫–µ—à–∞)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ Webhook –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ <10ms
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î –Ω–∞ 99%

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

| –ú–µ—Ç–æ–¥ | –ö–æ–≥–¥–∞ | –ö–æ–≥–æ –ø–∞—Ä—Å–∏—Ç | –°–∫–æ—Ä–æ—Å—Ç—å | –¢—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ |
|-------|-------|-------------|----------|--------------|
| **1. –ê–¥–º–∏–Ω—ã** | –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω | –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ | Instant | ‚úÖ –ê–¥–º–∏–Ω |
| **2. –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç** | –ü–æ –∑–∞–ø—Ä–æ—Å—É | –ê–∫—Ç–∏–≤–Ω—ã—Ö | Manual | ‚ùå –ù–µ—Ç |
| **3. Chat Member** | –í—Ö–æ–¥/–≤—ã—Ö–æ–¥ | –í—Å–µ—Ö –Ω–æ–≤—ã—Ö | Real-time | ‚úÖ –ê–¥–º–∏–Ω |
| **4. –°–æ–æ–±—â–µ–Ω–∏—è** | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –ê–∫—Ç–∏–≤–Ω—ã—Ö | Passive | ‚ùå –ù–µ—Ç* |

*–¢—Ä–µ–±—É–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è Privacy Mode

---

## üóÑÔ∏è MongoDB Schema

```javascript
{
  _id: "club_123",
  name: "SRG Almaty",
  telegram_group_id: -100123456,
  created_by: "user_789",
  
  members: [
    {
      user_id: "user_456",           // ID –≤ Ayda Run
      telegram_id: 111222,            // ID –≤ Telegram
      username: "runner_ivan",
      first_name: "Ivan",
      role: "organizer",              // organizer | member
      status: "active",               // active | left | kicked
      joined_at: "2024-12-01T10:00:00Z",
      last_seen: "2024-12-19T14:30:00Z",
      source: "chat_member_event"     // admin_import | chat_member_event | 
                                      // message_activity | manual_registration
    }
  ],
  
  sync: {
    last_sync: "2024-12-19T10:00:00Z",
    bot_is_admin: true,
    total_members_telegram: 45,
    total_members_ayda: 43
  }
}
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

### –í @BotFather:
```
/setprivacy
‚Üí –í—ã–±—Ä–∞—Ç—å –±–æ—Ç–∞
‚Üí Disable

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –±–æ—Ç—É –≤–∏–¥–µ—Ç—å –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø–µ (–¥–ª—è –º–µ—Ç–æ–¥–∞ #4)
```

### –í –∫–æ–¥–µ (webhook):
```python
ALLOWED_UPDATES = [
    "message",           # –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
    "chat_member",       # –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥
    "my_chat_member"     # –î–ª—è —Å–æ–±—ã—Ç–∏—è "–±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω"
]

await bot.set_webhook(
    url="https://your-domain.com/webhook",
    allowed_updates=ALLOWED_UPDATES
)
```

---

## üöÄ –ü–æ—Ä—è–¥–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

1. **MVP (–ø–µ—Ä–≤—ã–µ 10 –∫–ª—É–±–æ–≤):**
   - ‚úÖ –ú–µ—Ç–æ–¥ #1 (–ø–∞—Ä—Å–∏–Ω–≥ –∞–¥–º–∏–Ω–æ–≤)
   - ‚úÖ –ú–µ—Ç–æ–¥ #2 (—Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç)
   - ‚úÖ –ú–µ—Ç–æ–¥ #4 (—Å–æ–æ–±—â–µ–Ω–∏—è + –∫–µ—à)

2. **v1.1 (–ø–æ—Å–ª–µ 10 –∫–ª—É–±–æ–≤):**
   - ‚úÖ –ú–µ—Ç–æ–¥ #3 (chat_member —Å–æ–±—ã—Ç–∏—è)
   - ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–µ—à (Redis)
   - ‚úÖ –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (Celery)

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ë–µ–∑ –∫–µ—à–∞:**
- 5000 —Å–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å
- 10000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î
- ~300ms –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É webhook

**–° –∫–µ—à–µ–º:**
- 5000 —Å–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å
- ~50 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î (—Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏)
- <10ms –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É webhook
- **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ 99%** ‚úÖ

---

## ‚úÖ –ò—Ç–æ–≥

–¢—ã –Ω–∏—á–µ–≥–æ –Ω–µ —É–ø—É—Å—Ç–∏–ª! –í—Å–µ 4 –º–µ—Ç–æ–¥–∞ –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ (—Å—Ä–∞–∑—É)
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (—Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç)
- ‚úÖ –ù–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ø–∞—Å—Å–∏–≤–Ω–æ)
- ‚úÖ –£—à–µ–¥—à–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ø–æ–º–µ—á–∞–µ–º –∏ —É–±–∏—Ä–∞–µ–º –¥–æ—Å—Ç—É–ø)
