# MVP Readiness Plan - Ayda Run v2

**–î–∞—Ç–∞:** 2025-12-20
**–°—Ç–∞—Ç—É—Å:** Ready for Implementation
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 85% ‚Üí 100%

---

## üìä –†–ï–ó–Æ–ú–ï –ê–ù–ê–õ–ò–ó–ê

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–ø—É—Å–∫—É:** 85%

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π core flow –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞–º–∏. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω–æ –µ—Å—Ç—å **–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã** –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

## ‚úÖ –ß–¢–û –ì–û–¢–û–í–û –ò –†–ê–ë–û–¢–ê–ï–¢

### Core Flow (100% –≥–æ—Ç–æ–≤)

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—É–±–æ–≤ ‚Üí –ó–∞—è–≤–∫–∏ –Ω–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π ‚Üí –ó–∞–ø–∏—Å—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤**

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç end-to-end:
- –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–± —á–µ—Ä–µ–∑ webapp
- –°–æ–∑–¥–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ADMIN
- –î–ª—è –∑–∞–∫—Ä—ã—Ç—ã—Ö –∫–ª—É–±–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (permissions –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è)
- –ó–∞–ø–∏—Å—å –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ—Ç–∫—Ä—ã—Ç—ã–µ –∏ –∑–∞–∫—Ä—ã—Ç—ã–µ)

### Telegram –±–æ—Ç (90% –≥–æ—Ç–æ–≤)

**–†–∞–±–æ—Ç–∞–µ—Ç:**
- `/start` ‚Üí Onboarding –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Deep links –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –≤ –∫–ª—É–±—ã/–≥—Ä—É–ø–ø—ã
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö —Å –∫–Ω–æ–ø–∫–∞–º–∏ approve/reject
- –û–±—Ä–∞–±–æ—Ç–∫–∞ approve/reject —á–µ—Ä–µ–∑ callback buttons
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ —Ä–µ—à–µ–Ω–∏–∏ –ø–æ –∑–∞—è–≤–∫–µ
- –ê–≤—Ç–æ–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –¥–ª—è –ø—Ä–æ—à–µ–¥—à–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω)
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—É–±–æ–≤ –∏–∑ Telegram –≥—Ä—É–ø–ø—ã (`/create_club`)

### Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (100% –≥–æ—Ç–æ–≤)

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç:
- Home - –Ω–µ–¥–µ–ª—å–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- ClubsGroups - —Å–ø–∏—Å–æ–∫ –∫–ª—É–±–æ–≤ –∏ –≥—Ä—É–ø–ø
- CreateClub/CreateGroup - —Å–æ–∑–¥–∞–Ω–∏–µ
- ActivityCreate - —Å–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ActivityDetail - –¥–µ—Ç–∞–ª–∏ —Å –∑–∞–ø–∏—Å—å—é
- ClubGroupDetail - –¥–µ—Ç–∞–ª–∏ –∫–ª—É–±–∞/–≥—Ä—É–ø–ø—ã
- Profile - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Backend API (100% –≥–æ—Ç–æ–≤)

**–í—Å–µ CRUD endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- Clubs: 9 endpoints
- Groups: –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–ª—É–±–∞–º
- Activities: 11 endpoints
- Users: me, onboarding, stats
- Health check

**Security:**
- Rate limiting ‚úÖ
- CORS configuration ‚úÖ
- Input validation ‚úÖ
- Role-based permissions ‚úÖ

---

## üéØ –ö–†–ò–¢–ò–ß–ù–´–ï –ó–ê–î–ê–ß–ò (P0 - Must Have)

### 1. ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (–ó–ê–í–ï–†–®–ï–ù–û)

**–î–ª—è –∞–¥–º–∏–Ω–æ–≤:**
–ö–æ–º–∞–Ω–¥–∞ `/requests` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ pending –∑–∞—è–≤–∫–∏ –≤ –∫–ª—É–±–∞—Ö/–≥—Ä—É–ø–ø–∞—Ö, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ORGANIZER+

**–§–æ—Ä–º–∞—Ç (–∫–æ—Ä–æ—Ç–∫–∏–π, 2 —Å—Ç—Ä–æ–∫–∏):**
```
üìã –í–∞—à–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ:

1Ô∏è‚É£ –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ (@ivan_p) ‚Üí "Almaty Runners"
   [‚úÖ –ü—Ä–∏–Ω—è—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]

2Ô∏è‚É£ –ú–∞—Ä–∏—è –ö (@maria_k) ‚Üí "Trail Team"
   [‚úÖ –ü—Ä–∏–Ω—è—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
```

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
–ö–æ–º–∞–Ω–¥–∞ `/my_requests` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞—è–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–§–æ—Ä–º–∞—Ç:**
```
üì® –í–∞—à–∏ –∑–∞—è–≤–∫–∏:

üü° –û–∂–∏–¥–∞—é—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è
‚Ä¢ "Almaty Runners" (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥)

‚úÖ –û–¥–æ–±—Ä–µ–Ω—ã
‚Ä¢ "Trail Team" (–æ–¥–æ–±—Ä–µ–Ω–æ –≤—á–µ—Ä–∞)

‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω—ã
‚Ä¢ "–í–µ–ª–æ –ö–ª—É–±" (–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ –Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥)
```

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `bot/requests_handler.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π clubs/groups/activities
- ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `api_server.py` (Phase 5.1)
- ‚úÖ Inline –∫–Ω–æ–ø–∫–∏ approve/reject —á–µ—Ä–µ–∑ existing callback handler
- ‚úÖ Debug logging –¥–ª—è troubleshooting
- ‚úÖ `scripts/test_requests_commands.py` - —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
**Commit:** b760c3d

---

### 2. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö (–ó–ê–í–ï–†–®–ï–ù–û)

#### A. –ù–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –∫–ª—É–±–µ/–≥—Ä—É–ø–ø–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º:

**–í –ª–∏—á–∫—É:**
```
üèÉ –ù–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ "Almaty Runners"!

‚õ∞Ô∏è –í–µ—á–µ—Ä–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞ –ø–æ –≥–æ—Ä–∞–º
üìÖ 25 –¥–µ–∫–∞–±—Ä—è –≤ 18:00
üìç –ü–∞—Ä–∫ –ü–µ—Ä–≤–æ–≥–æ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞
üë• 5/20 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

[–û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ üîó]
```

**–í –≥—Ä—É–ø–ø—É Telegram (–µ—Å–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω–∞):**
```
@channel –ù–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!

‚õ∞Ô∏è –í–µ—á–µ—Ä–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞ –ø–æ –≥–æ—Ä–∞–º
üìÖ 25 –¥–µ–∫–∞–±—Ä—è –≤ 18:00
üìç –ü–∞—Ä–∫ –ü–µ—Ä–≤–æ–≥–æ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞

–ó–∞–ø–∏—Å–∞—Ç—å—Å—è: [—Å—Å—ã–ª–∫–∞ –Ω–∞ webapp]
```

#### B. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 2 –¥–Ω—è

**–í –ª–∏—á–∫—É:**
```
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ!

–ß–µ—Ä–µ–∑ 2 –¥–Ω—è:
üèÉ –í–µ—á–µ—Ä–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞ –ø–æ –≥–æ—Ä–∞–º
üìÖ 25 –¥–µ–∫–∞–±—Ä—è –≤ 18:00
üìç –ü–∞—Ä–∫ –ü–µ—Ä–≤–æ–≥–æ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞

–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã! ‚úÖ
```

**–í –≥—Ä—É–ø–ø—É:**
```
‚è∞ –ß–µ—Ä–µ–∑ 2 –¥–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!

üèÉ –í–µ—á–µ—Ä–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞ –ø–æ –≥–æ—Ä–∞–º
üìÖ 25 –¥–µ–∫–∞–±—Ä—è –≤ 18:00

–ó–∞–ø–∏—Å–∞–Ω–æ: 12/20 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
```

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `bot/activity_notifications.py` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤ –∏ –≥—Ä—É–ø–ø
- ‚úÖ `app/services/activity_reminder_service.py` - —Ñ–æ–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π —á–∞—Å)
- ‚úÖ `app/routers/activities.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `api_server.py` (Phase 6.1)
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é ‚úÖ
**Commit:** 78ab7fe

---

## üü¢ –í–ê–ñ–ù–´–ï –ó–ê–î–ê–ß–ò (P1 - Should Have)

### 3. üü¢ Telegram Group Integration

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–ª—É–±–æ–≤/–≥—Ä—É–ø–ø —Å Telegram –≥—Ä—É–ø–ø–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Å—Ç–∏–Ω–≥–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

**–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –°–º. –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç `tggroup_plan_v1_done.md`

**–û—Ü–µ–Ω–∫–∞:** 4-5 —á–∞—Å–æ–≤

---

### 4. ‚ö†Ô∏è –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–ª—É–±–æ–≤ (–í –ü–†–û–¶–ï–°–°–ï - 95% –ì–û–¢–û–í–û)

**–°—Ç–∞—Ç—É—Å:** –ü–æ—á—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

**User Avatar:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `User.photo` –≤ –º–æ–¥–µ–ª—å
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `User.strava_link` –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å Strava
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∏–∑ Telegram –ø—Ä–∏ onboarding
- ‚úÖ Endpoint `PATCH /api/users/me` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è (photo + strava_link)
- ‚úÖ –í –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤–æ–ø—Ä–æ—Å –ø—Ä–æ Strava link (—Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å")

**Club/Group Avatar:**
- ‚úÖ –ü–æ–ª—è `Club.photo`, `Group.photo` –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ç–æ –≥—Ä—É–ø–ø—ã —á–µ—Ä–µ–∑ `bot/group_parser.py`
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Telegram Bot API (`chat.photo.big_file_id ‚Üí get_file()`)
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ä–æ—É—Ç–µ—Ä `/api/media/photo/{file_path}` –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ

**Frontend:**
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Avatar.jsx` —Å fallback –Ω–∞ —Ü–≤–µ—Ç–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª—ã
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AvatarStack.jsx` –¥–ª—è —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤–æ –≤—Å–µ —ç–∫—Ä–∞–Ω—ã:
  - ClubCard/GroupCard (–∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ø–∏—Å–∫–æ–≤)
  - ClubGroupDetail (–¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
  - ActivityDetail (—É—á–∞—Å—Ç–Ω–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
  - ParticipantsSheet (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
  - Profile (–ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**

–ê–≤–∞—Ç–∞—Ä–∫–∏ –∫–ª—É–±–æ–≤/–≥—Ä—É–ø–ø **–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è**, —Ö–æ—Ç—è –≤ API –æ—Ç–≤–µ—Ç–µ –ø–æ–ª–µ `photo` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å –ü–û–õ–ù–´–ú URL:

```json
{
  "photo": "https://api.telegram.org/file/bot8260999042:AAFmev3w11iDTFqbAqpYemDJ5LBxnpD8kQc/profile_photos/file_0.jpg"
}
```

**–ß—Ç–æ –ø—Ä–æ–±–æ–≤–∞–ª–∏:**
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–≤–æ–π–Ω–∞—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è URL (–±—ã–ª–æ: `https://.../https://...`)
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è: `get_group_photo()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `file.file_path`
3. ‚úÖ Avatar –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `src.startsWith('http')` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç URL –∫–∞–∫ –µ—Å—Ç—å
4. ‚ö†Ô∏è **–ù–û**: `file.file_path` —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ü–û–õ–ù–´–ô URL, –∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- CORS –ø–æ–ª–∏—Ç–∏–∫–∞ Telegram API –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- Content Security Policy (CSP) –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- Telegram —Ç—Ä–µ–±—É–µ—Ç proxy –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
- URL –≤–∞–ª–∏–¥–µ–Ω, –Ω–æ Telegram –æ—Ç–¥–∞–µ—Ç 403/404 –ø—Ä–∏ –ø—Ä—è–º–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∏–∑ webapp

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ª–∏ URL –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ï—Å–ª–∏ –¥–∞ ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ CORS, –Ω—É–∂–µ–Ω proxy —á–µ—Ä–µ–∑ `/api/media/photo/`
3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –≤–æ–∑–º–æ–∂–Ω–æ, URL —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø–∞
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è MVP)

**–§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `storage/db.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `photo` –∏ `strava_link`
- ‚úÖ `storage/user_storage.py` - –º–µ—Ç–æ–¥—ã `update_photo()`, `update_profile()`
- ‚úÖ `schemas/user.py`, `schemas/club.py`, `schemas/group.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è —Å default=None
- ‚úÖ `app/routers/users.py` (–Ω–æ–≤—ã–π) - GET/PATCH /api/users/me
- ‚úÖ `app/routers/media.py` (–Ω–æ–≤—ã–π) - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ
- ‚úÖ `bot/onboarding_handler.py` - –≤–æ–ø—Ä–æ—Å –ø—Ä–æ Strava, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ
- ‚úÖ `bot/group_parser.py` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ –≥—Ä—É–ø–ø—ã
- ‚úÖ `webapp/src/components/ui/Avatar.jsx` (–Ω–æ–≤—ã–π)
- ‚úÖ `webapp/src/components/ui/AvatarStack.jsx` (–Ω–æ–≤—ã–π)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–æ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

**–û—Ü–µ–Ω–∫–∞ –æ—Å—Ç–∞–≤—à–µ–π—Å—è —Ä–∞–±–æ—Ç—ã:** 1-2 —á–∞—Å–∞ (–æ—Ç–ª–∞–¥–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ)

**–ö–æ–º–º–∏—Ç:** 5e222b6

---

### 5. üü¢ GPX –º–∞—Ä—à—Ä—É—Ç—ã

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ GPX –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º Telegram –∫–∞–Ω–∞–ª–µ.

**–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –°–º. –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç [gpx_implementation_plan.md](gpx_implementation_plan.md)

**–ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- –•—Ä–∞–Ω–∏–ª–∏—â–µ: –ü—Ä–∏–≤–∞—Ç–Ω—ã–π Telegram –∫–∞–Ω–∞–ª (–±–æ—Ç = –∞–¥–º–∏–Ω)
- –ó–∞–≥—Ä—É–∑–∫–∞: –ß–µ—Ä–µ–∑ Web App –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: –ü—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä —á–µ—Ä–µ–∑ Backend (–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Bot API)
- –í–∞–ª–∏–¥–∞—Ü–∏—è: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ .gpx + XML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –õ–∏–º–∏—Ç: –î–æ 20MB

**–û—Ü–µ–Ω–∫–∞:** 3-3.5 —á–∞—Å–∞

---

## üìä –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (P0):
1. ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ - **–ó–ê–í–ï–†–®–ï–ù–û** (–±—ã–ª–æ 4-5 —á–∞—Å–æ–≤)
2. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö - **–ó–ê–í–ï–†–®–ï–ù–û** (–±—ã–ª–æ 5-6 —á–∞—Å–æ–≤)

**–ò—Ç–æ–≥–æ P0:** ~~9-11 —á–∞—Å–æ–≤~~ ‚Üí **–í–°–ï –ó–ê–í–ï–†–®–ï–ù–û** ‚úÖ

### –í–∞–∂–Ω—ã–µ (P1):
3. Telegram Group Integration - **4-5 —á–∞—Å–æ–≤**
4. –ê–≤–∞—Ç–∞—Ä—ã - **3-4 —á–∞—Å–∞**
5. GPX –º–∞—Ä—à—Ä—É—Ç—ã - **2-3 —á–∞—Å–∞**

**–ò—Ç–æ–≥–æ P1:** 9-12 —á–∞—Å–æ–≤ = **1-1.5 –¥–Ω—è**

### –û–ë–©–ï–ï –í–†–ï–ú–Ø: 18-23 —á–∞—Å–∞ = **2-3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã**

---

## üöÄ –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –î–µ–Ω—å 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (`/requests`, `/my_requests`) ‚úÖ
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö (–≤ –ª–∏—á–∫—É + –≥—Ä—É–ø–ø—É) ‚úÖ
- [x] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 2 –¥–Ω—è (—Ñ–æ–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å) ‚úÖ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ P0 —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤ production

### –î–µ–Ω—å 2: –í–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏
- [ ] Telegram Group Integration (–ø–æ—Å—Ç–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π)
- [ ] –ê–≤–∞—Ç–∞—Ä—ã (backend + frontend)
- [ ] GPX –º–∞—Ä—à—Ä—É—Ç—ã

### –î–µ–Ω—å 3: –§–∏–Ω–∞–ª
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ flow
- [ ] Bug fixes
- [ ] Deploy –Ω–∞ production

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú

### –ö–æ–¥
- [x] Core flow —Ä–∞–±–æ—Ç–∞–µ—Ç end-to-end
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö —Ä–∞–±–æ—Ç–∞—é—Ç ‚úÖ
- [x] –í—Å–µ API endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [x] Frontend –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ API
- [x] Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] PostgreSQL database setup
- [ ] Environment variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (.env)
- [ ] Telegram bot token –∏ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Frontend build –∏ deploy (webapp/dist)
- [ ] Backend deploy (uvicorn/gunicorn)
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è webhook
- [ ] Monitoring (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Sentry)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—É–±–∞ ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É ‚Üí approve ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–ª—É–±–∞
- [ ] –ó–∞–ø–∏—Å—å –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Üí –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [ ] Onboarding —á–µ—Ä–µ–∑ `/start` ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Deep link invitation ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–æ–º–∞–Ω–¥—ã `/requests` –∏ `/my_requests` ‚Üí —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üéØ –ò–¢–û–ì–û–í–´–ô –í–ï–†–î–ò–ö–¢

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É –Ω–∞ 85%**

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:**
- Core flow –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚úÖ
- Telegram –±–æ—Ç —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ ‚úÖ
- Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∫—Ä–∞—Å–∏–≤—ã–º UI ‚úÖ
- –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ ‚úÖ
- Security –∏ permissions ‚úÖ

**–ß—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:**
1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (4-5 —á–∞—Å–æ–≤) üî¥
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö (5-6 —á–∞—Å–æ–≤) üî¥

**–û–±—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏:** 1-2 –¥–Ω—è —Ä–∞–±–æ—Ç—ã

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å MVP —Å 3-4 –∫–ª—É–±–∞–º–∏!**

–î–ª—è 50-100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–±—ã—Ç–æ—á–Ω–∞, –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –Ω–µ –±—É–¥–µ—Ç.

---

## üìû –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å P0 –∑–∞–¥–∞—á–∏ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å P1 –∑–∞–¥–∞—á–∏ (Telegram groups, –∞–≤–∞—Ç–∞—Ä—ã, GPX)
3. –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –ø—Ä–æ–π—Ç–∏ –≤–µ—Å—å flow –æ—Ç –ê –¥–æ –Ø
4. Deploy –Ω–∞ production - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
5. Soft launch —Å 3-4 –∫–ª—É–±–∞–º–∏
6. –°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ ‚Üí –∏—Ç–µ—Ä–∞—Ü–∏—è

---

**Last Updated:** 2025-12-20
**Author:** Claude Sonnet 4.5
**Status:** Ready for Implementation
