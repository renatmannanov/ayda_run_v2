# Plan: –§–∏–ª—å—Ç—Ä—ã –ø–æ –≤–∏–¥–∞–º —Å–ø–æ—Ä—Ç–∞ –Ω–∞ Home

## –û–±–∑–æ—Ä
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –≤–∏–¥–∞–º —Å–ø–æ—Ä—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å –∫–Ω–æ–ø–∫–æ–π-—ç–∫–≤–∞–ª–∞–π–∑–µ—Ä–æ–º –∏ –ø–æ–ø–∞–ø–æ–º –≤—ã–±–æ—Ä–∞.

## UI Design

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ú–æ–∏ / –í—Å–µ              [‚â°]           12 ‚îÇ  <- [‚â°] –∫–Ω–æ–ø–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ (—ç–∫–≤–∞–ª–∞–π–∑–µ—Ä)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–æ–ø–∞–ø:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –§–∏–ª—å—Ç—Ä –ø–æ —Å–ø–æ—Ä—Ç—É                     ‚úï  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [üèÉ –ë–µ–≥] [‚õ∞Ô∏è –¢—Ä–µ–π–ª] [üö¥ –í–µ–ª–æ]          ‚îÇ
‚îÇ [ü•æ –•–∞–π–∫–∏–Ω–≥] [üßò –ô–æ–≥–∞] [üí™ Workout]    ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ              [‚úï –°–±—Ä–æ—Å–∏—Ç—å]               ‚îÇ  <- –ø–æ—è–≤–ª—è–µ—Ç—Å—è –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –≤—ã–±—Ä–∞–Ω–æ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. Backend - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞

**–§–∞–π–ª:** `storage/db.py`

```python
class SportType(str, Enum):
    RUNNING = "running"
    TRAIL = "trail"
    HIKING = "hiking"
    CYCLING = "cycling"
    YOGA = "yoga"        # NEW
    WORKOUT = "workout"  # NEW
    OTHER = "other"
```

### 2. Backend - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä sport_types

**–§–∞–π–ª:** `app/routers/activities.py`

–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞:

```python
@router.get("", response_model=List[ActivityResponse])
async def list_activities(
    # ... existing params ...
    sport_types: Optional[str] = Query(None, description="Comma-separated sport types"),  # CHANGED
    # ...
):
    # ...
    if sport_types:
        types_list = [SportType(t.strip()) for t in sport_types.split(',')]
        query = query.filter(Activity.sport_type.in_(types_list))
```

### 3. Frontend - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–ø–æ—Ä—Ç–∞

**–§–∞–π–ª:** `webapp/src/constants/sports.js`

```javascript
export const SPORT_TYPES = [
    { id: 'running', icon: 'üèÉ', label: '–ë–µ–≥' },
    { id: 'trail', icon: '‚õ∞Ô∏è', label: '–¢—Ä–µ–π–ª' },
    { id: 'hiking', icon: 'ü•æ', label: '–•–∞–π–∫–∏–Ω–≥' },
    { id: 'cycling', icon: 'üö¥', label: '–í–µ–ª–æ' },
    { id: 'yoga', icon: 'üßò', label: '–ô–æ–≥–∞' },
    { id: 'workout', icon: 'üí™', label: 'Workout' },
]
```

**–§–∞–π–ª:** `webapp/src/data/sample_data.js`

```javascript
export const sportTypes = [
    { id: 'running', icon: 'üèÉ', label: '–ë–µ–≥' },
    { id: 'trail', icon: '‚õ∞Ô∏è', label: '–¢—Ä–µ–π–ª' },
    { id: 'hiking', icon: 'ü•æ', label: '–•–∞–π–∫–∏–Ω–≥' },
    { id: 'cycling', icon: 'üö¥', label: '–í–µ–ª–æ' },
    { id: 'yoga', icon: 'üßò', label: '–ô–æ–≥–∞' },
    { id: 'workout', icon: 'üí™', label: 'Workout' },
]
```

### 4. Frontend - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç SportFilterButton

**–§–∞–π–ª:** `webapp/src/components/home/SportFilterButton.jsx` (NEW)

–ö–Ω–æ–ø–∫–∞-—ç–∫–≤–∞–ª–∞–π–∑–µ—Ä –≤ —Ö–µ–¥–µ—Ä–µ:
- –ò–∫–æ–Ω–∫–∞ —ç–∫–≤–∞–ª–∞–π–∑–µ—Ä–∞ (3 –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–æ—Å–∫–∏ —Å —Ç–æ—á–∫–∞–º–∏)
- –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö

```jsx
export function SportFilterButton({ selectedCount, onClick }) {
    const hasFilters = selectedCount > 0

    return (
        <button
            onClick={onClick}
            className={`relative p-2 rounded-lg transition-colors ${
                hasFilters
                    ? 'bg-gray-800 text-white'
                    : 'text-gray-400 hover:text-gray-600'
            }`}
        >
            {/* Equalizer icon */}
            <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={2}>
                <path d="M4 21v-7m0-4V3m8 18v-9m0-4V3m8 18v-5m0-4V3" />
                <circle cx="4" cy="14" r="2" fill="currentColor" />
                <circle cx="12" cy="8" r="2" fill="currentColor" />
                <circle cx="20" cy="16" r="2" fill="currentColor" />
            </svg>

            {/* Badge */}
            {hasFilters && (
                <span className="absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center">
                    {selectedCount}
                </span>
            )}
        </button>
    )
}
```

### 5. Frontend - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç SportFilterPopup

**–§–∞–π–ª:** `webapp/src/components/home/SportFilterPopup.jsx` (NEW)

Bottom sheet –ø–æ–ø–∞–ø —Å –≤—ã–±–æ—Ä–æ–º –≤–∏–¥–æ–≤ —Å–ø–æ—Ä—Ç–∞:

```jsx
export function SportFilterPopup({
    isOpen,
    onClose,
    selectedSports,
    onToggle,
    onClear
}) {
    if (!isOpen) return null

    return (
        <div className="fixed inset-0 z-50 flex items-end justify-center">
            {/* Backdrop */}
            <div className="absolute inset-0 bg-black/30" onClick={onClose} />

            {/* Popup */}
            <div className="relative bg-white rounded-t-2xl w-full max-w-md p-4 pb-8">
                {/* Header */}
                <div className="flex items-center justify-between mb-4">
                    <h3 className="text-base font-medium text-gray-800">
                        –§–∏–ª—å—Ç—Ä –ø–æ —Å–ø–æ—Ä—Ç—É
                    </h3>
                    <button onClick={onClose} className="text-gray-400 hover:text-gray-600 p-1">
                        <XIcon />
                    </button>
                </div>

                {/* Pills */}
                <div className="flex flex-wrap gap-2">
                    {SPORT_TYPES.map(sport => (
                        <button
                            key={sport.id}
                            onClick={() => onToggle(sport.id)}
                            className={`flex items-center gap-1.5 px-3 py-2 rounded-full text-sm transition-colors ${
                                selectedSports.includes(sport.id)
                                    ? 'bg-gray-800 text-white'
                                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                            }`}
                        >
                            <span>{sport.icon}</span>
                            <span>{sport.label}</span>
                        </button>
                    ))}
                </div>

                {/* Reset button */}
                {selectedSports.length > 0 && (
                    <button
                        onClick={onClear}
                        className="mt-4 flex items-center gap-1.5 px-3 py-2 rounded-full text-sm text-gray-400 hover:text-gray-600 hover:bg-gray-100 mx-auto"
                    >
                        <XIcon className="w-4 h-4" />
                        <span>–°–±—Ä–æ—Å–∏—Ç—å</span>
                    </button>
                )}
            </div>
        </div>
    )
}
```

### 6. Frontend - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Home.jsx

**–§–∞–π–ª:** `webapp/src/screens/Home.jsx`

```jsx
// –î–æ–±–∞–≤–∏—Ç—å state
const [selectedSports, setSelectedSports] = useState([])
const [showSportFilter, setShowSportFilter] = useState(false)

// –ò–∑–º–µ–Ω–∏—Ç—å –≤—ã–∑–æ–≤ useActivities —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
const filters = useMemo(() => {
    const f = {}
    if (selectedSports.length > 0) {
        f.sport_types = selectedSports.join(',')
    }
    return f
}, [selectedSports])

const { data: activities = [], isLoading: loading, error, refetch } = useActivities(filters)

// Handlers
const toggleSport = (sportId) => {
    setSelectedSports(prev =>
        prev.includes(sportId)
            ? prev.filter(id => id !== sportId)
            : [...prev, sportId]
    )
}

const clearSportFilters = () => setSelectedSports([])

// –í header –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —Ñ–∏–ª—å—Ç—Ä–∞
<div className="... flex items-center justify-between ...">
    <ModeToggle mode={mode} onModeChange={setMode} />
    <div className="flex items-center gap-2">
        <SportFilterButton
            selectedCount={selectedSports.length}
            onClick={() => setShowSportFilter(true)}
        />
        <span className="text-sm text-gray-400">{totalCount}</span>
    </div>
</div>

// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ø–∞–ø
<SportFilterPopup
    isOpen={showSportFilter}
    onClose={() => setShowSportFilter(false)}
    selectedSports={selectedSports}
    onToggle={toggleSport}
    onClear={clearSportFilters}
/>
```

### 7. Frontend - –û–±–Ω–æ–≤–∏—Ç—å api.js —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä

**–§–∞–π–ª:** `webapp/src/api.js`

–î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å–ø–æ—Ä—Ç–∞ –≤ transformActivity:

```javascript
icon: (a.sport_type === 'running' || !a.sport_type) ? 'üèÉ' :
    a.sport_type === 'trail' ? '‚õ∞Ô∏è' :
    a.sport_type === 'cycling' ? 'üö¥' :
    a.sport_type === 'hiking' ? 'ü•æ' :
    a.sport_type === 'yoga' ? 'üßò' :
    a.sport_type === 'workout' ? 'üí™' : 'üèÉ'
```

---

## –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **Backend: Enum SportType** - –¥–æ–±–∞–≤–∏—Ç—å yoga, workout
2. **Backend: API filter** - –∏–∑–º–µ–Ω–∏—Ç—å sport_type –Ω–∞ sport_types (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π)
3. **Frontend: Constants** - –¥–æ–±–∞–≤–∏—Ç—å yoga, workout –≤ SPORT_TYPES
4. **Frontend: SportFilterButton** - —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–Ω–æ–ø–∫–∏
5. **Frontend: SportFilterPopup** - —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ø–∞–ø–∞
6. **Frontend: Home.jsx** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
7. **Frontend: api.js** - –¥–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤
8. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

---

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `storage/db.py` | –î–æ–±–∞–≤–∏—Ç—å YOGA, WORKOUT –≤ SportType enum |
| `app/routers/activities.py` | –ò–∑–º–µ–Ω–∏—Ç—å sport_type –Ω–∞ sport_types (comma-separated) |
| `webapp/src/constants/sports.js` | –î–æ–±–∞–≤–∏—Ç—å yoga, workout |
| `webapp/src/data/sample_data.js` | –î–æ–±–∞–≤–∏—Ç—å yoga, workout + –æ–±–Ω–æ–≤–∏—Ç—å getSportIcon |
| `webapp/src/components/home/SportFilterButton.jsx` | NEW - –∫–Ω–æ–ø–∫–∞ —ç–∫–≤–∞–ª–∞–π–∑–µ—Ä |
| `webapp/src/components/home/SportFilterPopup.jsx` | NEW - –ø–æ–ø–∞–ø –≤—ã–±–æ—Ä–∞ |
| `webapp/src/screens/Home.jsx` | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã |
| `webapp/src/api.js` | –î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫–∏ yoga, workout |

---

## –ß–µ–∫–ª–∏—Å—Ç

### Backend
- [x] –î–æ–±–∞–≤–∏—Ç—å YOGA –≤ SportType enum
- [x] –î–æ–±–∞–≤–∏—Ç—å WORKOUT –≤ SportType enum
- [x] –ò–∑–º–µ–Ω–∏—Ç—å API –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞ sport_types (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - enum —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### Frontend
- [x] –û–±–Ω–æ–≤–∏—Ç—å SPORT_TYPES –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É
- [x] –û–±–Ω–æ–≤–∏—Ç—å sportTypes –≤ sample_data.js
- [x] –û–±–Ω–æ–≤–∏—Ç—å getSportIcon helper (—á–µ—Ä–µ–∑ api.js transformer)
- [x] –°–æ–∑–¥–∞—Ç—å SportFilterButton –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –°–æ–∑–¥–∞—Ç—å SportFilterPopup –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ Home.jsx
- [x] –û–±–Ω–æ–≤–∏—Ç—å transformActivity –≤ api.js
- [x] –î–æ–±–∞–≤–∏—Ç—å CSS –∞–Ω–∏–º–∞—Ü–∏—é slide-up –¥–ª—è –ø–æ–ø–∞–ø–∞

### QA
- [ ] –§–∏–ª—å—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–¥–Ω–∏–º –≤–∏–¥–æ–º
- [ ] –§–∏–ª—å—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∏–¥–∞–º–∏
- [ ] –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç badge –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ö
- [ ] –°—á—ë—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
