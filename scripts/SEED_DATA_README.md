# Seed Data для Ayda Run

Этот документ описывает тестовые данные для приложения Ayda Run.

## Обзор

Скрипт `seed_data.py` создает полный набор тестовых данных для разработки и тестирования:

- **30 пользователей** с реалистичными Telegram данными
- **3 беговых клуба** (SRG, Nike Running Club, Almaty Alpine Club)
- **5 групп** (3 в составе SRG + 2 отдельные)
- **101 активность** (включая регулярные тренировки)
- **56 членств** в клубах и группах
- **488 регистраций** на активности

## Использование

### Запуск скрипта

```bash
python seed_data.py
```

**Внимание:** Скрипт удаляет все существующие данные перед созданием новых!

### Что создается

#### 1. Пользователи (30 человек)

Пользователи созданы с реалистичными данными:
- `telegram_id`: уникальный ID пользователя Telegram
- `username`: никнейм в формате Telegram
- `first_name`: имя на русском языке
- Admin пользователь: `telegram_id=1`, `username=admin`

**Примеры:**
- @alexrunner (Александр Петров)
- @marinasky (Марина Иванова)
- @dmitry_trail (Дмитрий Соколов)

**Примечание:** В БД не хранятся `last_name` и `photo_url` - они приходят из Telegram WebApp API при авторизации.

#### 2. SRG - Sky Running Group (Клуб)

**Описание:** Команда скайраннеров Алматы. Закрытый клуб только по приглашениям.

**Структура:**
- **15 участников** (2 организатора + 13 в группах)
- **3 группы:**
  - Новички (5 человек + 1 тренер)
  - Любители (5 человек + 1 тренер)
  - Мощные (3 человека + 1 тренер)

**Активности (9 тренировок):**

**2025:**
- 7 декабря – Межклубная контрольная тренировка пик Букреева и SKY
- 13 декабря – Шымбулак – перевал 3200 – Нунатак 3500 (9 km, 1230 D+)
- 21 декабря – Шымбулак – вершина Мынжылкы 3600 м (14 km, 1370 D+)
- 28 декабря – Малыш 3840 м / пещера Дельфин (20 km, 1600 D+)

**2026:**
- 3-4 января – Шымбулак - озеро Маншук Маметовой 3600 м
- 11 января – Акклиматизация Бастион Амангельды 3900 м
- 17-18 января – Амангельды рэйс
- 24-25 января – SRG выезд (Кольсай, Кетмень)
- 30 января – Поляна Шукур + БАО (20 km, 1200 D+)

**Видимость:** `PRIVATE_CLUB` (только участники клуба)

#### 3. Nike Running Club (Клуб)

**Описание:** Открытый беговой клуб Nike. Регулярные тренировки для всех уровней.

**Структура:**
- **20 участников** (2 организатора + 18 участников)
- Без групп (все в общем клубе)
- Участники могут пересекаться с другими клубами

**Активности (77 регулярных тренировок на 6 месяцев):**
- **Вторник 18:00** – Пробежка на терренкуре (5 km, легкая)
- **Четверг 18:30** – Интервалы на центральном стадионе (8 km, средняя)
- **Суббота 09:00** – Лонг в парке Первого Президента (15 km, средняя)

**Видимость:** `PUBLIC` (открытые для всех)

#### 4. Almaty Alpine Club (Клуб)

**Описание:** Клуб альпинистов Алматы. Закрытый клуб.

**Структура:**
- **6 участников** (1 админ + 1 организатор + 4 уникальных участника)
- Участники не пересекаются с другими клубами

**Активности (2 восхождения):**
- 15 января 2026 – Восхождение на пик Комсомола (18 km, сложная)
- 1 февраля 2026 – Скалолазание на Арасане (3 km, средняя)

**Видимость:** `PRIVATE_CLUB`

#### 5. Trail Running Almaty (Отдельная группа)

**Описание:** Закрытая группа любителей трейлраннинга.

**Структура:**
- **10 участников** (1 организатор + 9 участников)
- Отдельная группа (не привязана к клубу)

**Активности:**
- 20 декабря 2025 – Трейл на Кок-Жайляу (12 km, средняя)

**Видимость:** `PRIVATE_GROUP`

#### 6. Parkrun Almaty (Отдельная группа)

**Описание:** Открытая группа для паркранов по субботам.

**Структура:**
- **5 участников** (1 организатор + 4 участника)
- Открытая группа

**Активности (12 паркранов):**
- Каждую субботу в 09:00 – Parkrun Almaty (5 km, легкая, Парк Горького)

**Видимость:** `PUBLIC`

## Роли пользователей

### Admin (telegram_id=1)
- Организатор в клубах: **SRG**, **Nike Running Club**
- Создатель большинства активностей

### Организаторы
- **SRG:** admin + alexrunner
- **Nike:** admin + roman_active
- **Almaty Alpine Club:** roman_active (админ) + svetlana_run
- **Trail Running Almaty:** vladislav_sky
- **Parkrun Almaty:** julia_hike

### Тренеры (в группах SRG)
- **Новички:** marinasky
- **Любители:** sergey_ultra
- **Мощные:** anna_fitness

## Регистрации на активности

- Примерно **30% участников** зарегистрированы на каждую активность
- Регистрации распределяются в зависимости от членства в клубах/группах
- Для завершенных активностей: 75% участников отметились как присутствовали

## Структура данных Telegram User

Когда пользователь авторизуется через Telegram WebApp API, приложение получает:

```json
{
  "id": 123456789,
  "first_name": "Александр",
  "last_name": "Петров",
  "username": "alexrunner",
  "language_code": "ru",
  "is_premium": false,
  "photo_url": "https://t.me/i/userpic/320/xxxxx.jpg"
}
```

**Примечание:** `photo_url` не хранится в БД, но должен отображаться в UI из данных Telegram.

## Локации

Все активности проходят в городе **Алматы** и окрестностях:
- Шымбулак
- Терренкур
- Центральный стадион
- Парк Первого Президента
- Парк Горького
- Кок-Жайляу
- Пик Букреева
- Кольсай, Кетмень

## Временной диапазон

Активности созданы на период с **декабря 2025** по **июнь 2026** (6 месяцев).

Текущая дата в скрипте: **12 декабря 2025**

## Типы спорта

- `running` – Бег
- `trail` – Трейл-раннинг
- `hiking` – Пеший туризм / альпинизм

## Уровни сложности

- `easy` – Легкая (паркраны, восстановительные пробежки)
- `medium` – Средняя (интервалы, длинные пробежки, трейлы)
- `hard` – Сложная (горные восхождения, ультра-дистанции)

## Видимость активностей

- `PUBLIC` – Открытые для всех (Nike, Parkrun)
- `PRIVATE_CLUB` – Только для участников клуба (SRG, Alpine)
- `PRIVATE_GROUP` – Только для участников группы (Trail Running Almaty)

## Переиспользование для тестов

Скрипт можно использовать для:
1. **Разработки** – быстрое наполнение БД реалистичными данными
2. **Тестирования** – проверка работы с большим количеством данных
3. **Демонстрации** – показ функционала приложения

### Модификация данных

Чтобы изменить данные, отредактируйте константы в `seed_data.py`:
- `SAMPLE_USERS` – список пользователей
- Функции `create_*_activities()` – активности клубов/групп
- Параметры распределения участников

## Проверка данных

После запуска скрипта можно проверить данные через API:

```bash
# Запустить API сервер
python api_server.py

# Проверить клубы
curl http://localhost:8000/api/clubs

# Проверить активности
curl http://localhost:8000/api/activities

# Проверить группы
curl http://localhost:8000/api/groups

# Проверить участников активности
curl http://localhost:8000/api/activities/1/participants
```

## Итоговая статистика

После выполнения скрипта в БД будет:
- ✅ 30 пользователей
- ✅ 3 клуба
- ✅ 5 групп
- ✅ 101 активность
- ✅ 56 членств
- ✅ 488 регистраций на активности

---

**Примечание:** Скрипт безопасно удаляет все старые данные перед созданием новых. Используйте с осторожностью в production!
